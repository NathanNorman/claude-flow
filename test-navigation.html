<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Test</title>
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            background: #0d1117;
            color: #f0f6fc;
            padding: 20px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid;
        }
        .test-pass {
            background: rgba(35, 134, 54, 0.2);
            border-color: #238636;
        }
        .test-fail {
            background: rgba(218, 54, 51, 0.2);
            border-color: #da3633;
        }
        .test-info {
            background: rgba(9, 105, 218, 0.2);
            border-color: #0969da;
        }
        pre {
            background: #161b22;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Claude Flow Navigation System Test</h1>
    <div id="testResults"></div>
    
    <script>
        const results = [];
        
        function addResult(test, status, message, details = null) {
            results.push({ test, status, message, details });
            updateDisplay();
        }
        
        function updateDisplay() {
            const container = document.getElementById('testResults');
            container.innerHTML = results.map(result => `
                <div class="test-result test-${result.status}">
                    <strong>${result.test}:</strong> ${result.message}
                    ${result.details ? `<pre>${result.details}</pre>` : ''}
                </div>
            `).join('');
        }
        
        // Test 1: Check if HTML elements exist
        addResult(
            "HTML Panel Elements", 
            document.getElementById('dashboardPanel') ? 'pass' : 'fail',
            document.getElementById('dashboardPanel') ? 'All panel elements found' : 'Panel elements missing'
        );
        
        // Test 2: Check navigation buttons
        const navButtons = document.querySelectorAll('.nav-button');
        addResult(
            "Navigation Buttons",
            navButtons.length > 0 ? 'pass' : 'fail', 
            `Found ${navButtons.length} navigation buttons`,
            Array.from(navButtons).map(btn => `${btn.textContent.trim()} -> ${btn.dataset.panel}`).join('\n')
        );
        
        // Test 3: Check data-panel attributes
        const buttonsWithPanels = Array.from(navButtons).filter(btn => btn.dataset.panel);
        addResult(
            "Data-Panel Attributes",
            buttonsWithPanels.length === navButtons.length ? 'pass' : 'fail',
            `${buttonsWithPanels.length}/${navButtons.length} buttons have data-panel attributes`
        );
        
        // Test 4: Check CSS classes
        const panels = document.querySelectorAll('.dashboard-panel');
        const activePanel = document.querySelector('.dashboard-panel.active');
        addResult(
            "Panel CSS Classes",
            panels.length > 0 && activePanel ? 'pass' : 'fail',
            `Found ${panels.length} panels, ${activePanel ? '1' : '0'} active`,
            `Active panel: ${activePanel ? activePanel.id : 'none'}`
        );
        
        // Test 5: Simulate dashboard initialization
        setTimeout(() => {
            if (window.dashboard) {
                addResult(
                    "Dashboard Object",
                    'pass',
                    'Dashboard object is available globally',
                    `Type: ${typeof window.dashboard}\nMethods: ${Object.getOwnPropertyNames(Object.getPrototypeOf(window.dashboard)).filter(name => typeof window.dashboard[name] === 'function').slice(0, 10).join(', ')}...`
                );
                
                // Test navigation functionality
                try {
                    window.dashboard.switchPanel('analytics');
                    const analyticsPanel = document.getElementById('analyticsPanel');
                    const isActive = analyticsPanel && analyticsPanel.classList.contains('active');
                    addResult(
                        "Navigation Functionality",
                        isActive ? 'pass' : 'fail',
                        isActive ? 'Panel switching works correctly' : 'Panel switching failed',
                        isActive ? 'Successfully switched to analytics panel' : 'Analytics panel not activated'
                    );
                } catch (error) {
                    addResult(
                        "Navigation Functionality",
                        'fail',
                        'Error during panel switching',
                        error.message
                    );
                }
            } else {
                addResult(
                    "Dashboard Object",
                    'fail',
                    'Dashboard object not available globally'
                );
            }
        }, 2000);
        
        addResult("Test Status", "info", "Running navigation system tests...");
    </script>
    
    <!-- Include the dashboard for testing -->
    <iframe src="src/ui/console/index.html" style="width: 1px; height: 1px; opacity: 0;"></iframe>
</body>
</html>